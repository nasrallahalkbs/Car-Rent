<!-- CACHE_BUSTER 1746145583 --><!-- CACHE_BUSTER 1746145583 --><!-- CACHE_BUSTER 1746145583 --><!-- CACHE_BUSTER 1746145583 -->{% extends "admin/index.html" %}
{% load i18n %}
{% load static %}

{% block title %}{{ title }} | Admin Dashboard{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h3 class="card-title mb-0">{{ title }}</h3>
                </div>
                <div class="card-body">
                    <form method="post" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.make.id_for_label }}" class="form-label">Make:</label>
                                    {{ form.make }}
                                    {% if form.make.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.make.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.model.id_for_label }}" class="form-label">Model:</label>
                                    {{ form.model }}
                                    {% if form.model.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.model.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="{{ form.year.id_for_label }}" class="form-label">Year:</label>
                                    {{ form.year }}
                                    {% if form.year.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.year.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="{{ form.color.id_for_label }}" class="form-label">Color:</label>
                                    {{ form.color }}
                                    {% if form.color.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.color.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="{{ form.license_plate.id_for_label }}" class="form-label">License Plate:</label>
                                    {{ form.license_plate }}
                                    {% if form.license_plate.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.license_plate.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="{{ form.daily_rate.id_for_label }}" class="form-label">Daily Rate ($):</label>
                                    {{ form.daily_rate }}
                                    {% if form.daily_rate.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.daily_rate.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="{{ form.category.id_for_label }}" class="form-label">Category:</label>
                                    {{ form.category }}
                                    {% if form.category.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.category.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <label for="{{ form.seats.id_for_label }}" class="form-label">Seats:</label>
                                    {{ form.seats }}
                                    {% if form.seats.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.seats.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.transmission.id_for_label }}" class="form-label">Transmission:</label>
                                    {{ form.transmission }}
                                    {% if form.transmission.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.transmission.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="{{ form.fuel_type.id_for_label }}" class="form-label">Fuel Type:</label>
                                    {{ form.fuel_type }}
                                    {% if form.fuel_type.errors %}
                                    <div class="invalid-feedback d-block">
                                        {{ form.fuel_type.errors }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="{{ form.features.id_for_label }}" class="form-label">Features (comma-separated):</label>
                            {{ form.features }}
                            {% if form.features.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.features.errors }}
                            </div>
                            {% endif %}
                            <div class="form-text text-muted">
                                Enter features separated by commas (e.g., "GPS, Bluetooth, Backup Camera")
                            </div>
                        </div>
                        
                        <div class="form-group mb-3">
                            <label for="{{ form.image_url.id_for_label }}" class="form-label">Image URL:</label>
                            {{ form.image_url }}
                            {% if form.image_url.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.image_url.errors }}
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="form-check mb-4">
                            {{ form.is_available }}
                            <label class="form-check-label" for="{{ form.is_available.id_for_label }}">
                                Available for Rent
                            </label>
                            {% if form.is_available.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.is_available.errors }}
                            </div>
                            {% endif %}
                        </div>
                        
                        <div class="d-flex justify-content-between">
                            <a href="{% url 'admin_cars' %}" class="btn btn-secondary">
                                <i class="fa fa-arrow-left"></i> Back to Cars
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fa fa-save"></i> Save Car
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            {% if car %}
            <div class="card mt-4 shadow">
                <div class="card-header bg-info text-white">
                    <h3 class="card-title mb-0">Car Preview</h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            {% if car.image_url %}
                            <img src="{{ car.image_url }}" class="img-fluid rounded" alt="{{ car.make }} {{ car.model }}">
                            {% else %}
                            <div class="bg-light p-5 text-center rounded">
                                <i class="fa fa-car fa-4x text-muted"></i>
                                <p class="mt-2 text-muted">No image available</p>
                            </div>
                            {% endif %}
                        </div>
                        <div class="col-md-8">
                            <h4>{{ car.year }} {{ car.make }} {{ car.model }}</h4>
                            <p class="text-muted">{{ car.color }} | License: {{ car.license_plate }}</p>
                            
                            <div class="row mt-3">
                                <div class="col-6">
                                    <p><strong>Category:</strong> {{ car.category }}</p>
                                </div>
                                <div class="col-6">
                                    <p><strong>Daily Rate:</strong> ${{ car.daily_rate }}</p>
                                </div>
                                <div class="col-6">
                                    <p><strong>Transmission:</strong> {{ car.transmission }}</p>
                                </div>
                                <div class="col-6">
                                    <p><strong>Fuel Type:</strong> {{ car.fuel_type }}</p>
                                </div>
                                <div class="col-6">
                                    <p><strong>Seats:</strong> {{ car.seats }}</p>
                                </div>
                                <div class="col-6">
                                    <p><strong>Status:</strong>
                                        {% if car.is_available %}
                                        <span class="badge bg-success">Available</span>
                                        {% else %}
                                        <span class="badge bg-danger">Not Available</span>
                                        {% endif %}
                                    </p>
                                </div>
                            </div>
                            
                            {% if car.feature_list %}
                            <div class="mt-3">
                                <h5>Features:</h5>
                                <ul class="list-group list-group-flush">
                                    {% for feature in car.feature_list %}
                                    <li class="list-group-item">{{ feature }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}