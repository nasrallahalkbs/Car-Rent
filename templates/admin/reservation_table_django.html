<table class="table table-hover admin-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Customer</th>
            <th>Car</th>
            <th>Dates</th>
            <th>Total</th>
            <th>Status</th>
            <th>Payment</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for item in reservations %}
        <tr>
            <td>{{ item.reservation.id }}</td>
            <td>
                <div class="fw-bold">{{ item.user.first_name }} {{ item.user.last_name }}</div>
                <small class="text-muted">{{ item.user.email }}</small>
            </td>
            <td>
                <div class="fw-bold">{{ item.car.make }} {{ item.car.model }}</div>
                <small class="text-muted">{{ item.car.license_plate }}</small>
            </td>
            <td>
                <div>{{ item.reservation.start_date|date:"M d, Y" }} &rarr; {{ item.reservation.end_date|date:"M d, Y" }}</div>
                <small class="text-muted">{{ item.reservation.created_at|date:"M d, Y H:i" }}</small>
            </td>
            <td>${{ item.reservation.total_price|floatformat:2 }}</td>
            <td>
                <span class="badge 
                    {% if item.reservation.status == 'pending' %}bg-warning{% endif %}
                    {% if item.reservation.status == 'confirmed' %}bg-primary{% endif %}
                    {% if item.reservation.status == 'completed' %}bg-success{% endif %}
                    {% if item.reservation.status == 'cancelled' %}bg-danger{% endif %}">
                    {{ item.reservation.status|title }}
                </span>
            </td>
            <td>
                <span class="badge 
                    {% if item.reservation.payment_status == 'pending' %}bg-warning{% endif %}
                    {% if item.reservation.payment_status == 'paid' %}bg-success{% endif %}
                    {% if item.reservation.payment_status == 'refunded' %}bg-info{% endif %}">
                    {{ item.reservation.payment_status|title }}
                </span>
            </td>
            <td class="action-buttons">
                {% if item.reservation.status == 'pending' %}
                    <a href="{% url 'update_reservation_status' item.reservation.id 'completed' %}" class="btn btn-sm btn-outline-success" title="Mark as Completed">
                        <i class="fas fa-check"></i>
                    </a>
                    <a href="{% url 'update_reservation_status' item.reservation.id 'confirmed' %}" class="btn btn-sm btn-outline-primary" title="Confirm">
                        <i class="fas fa-thumbs-up"></i>
                    </a>
                    <a href="{% url 'update_reservation_status' item.reservation.id 'cancelled' %}" class="btn btn-sm btn-outline-danger" title="Cancel" onclick="return confirm('Are you sure you want to cancel this reservation?');">
                        <i class="fas fa-ban"></i>
                    </a>
                {% elif item.reservation.status == 'confirmed' %}
                    <a href="{% url 'update_reservation_status' item.reservation.id 'completed' %}" class="btn btn-sm btn-outline-success" title="Mark as Completed">
                        <i class="fas fa-check"></i>
                    </a>
                    <a href="{% url 'update_reservation_status' item.reservation.id 'cancelled' %}" class="btn btn-sm btn-outline-danger" title="Cancel" onclick="return confirm('Are you sure you want to cancel this reservation?');">
                        <i class="fas fa-ban"></i>
                    </a>
                {% else %}
                    <span class="text-muted">No actions available</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
